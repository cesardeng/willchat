var Login=function(){var r=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{username:{required:!0},password:{required:!0},remember:{required:!1}},messages:{username:{required:"请输入用户名."},password:{required:"请输入密码."}},invalidHandler:function(r,e){$(".alert-danger",$(".login-form")).show()},highlight:function(r){$(r).closest(".form-group").addClass("has-error")},success:function(r){r.closest(".form-group").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){r.insertAfter(e.closest(".input-icon"))},submitHandler:function(r){var e=$(r),o=e.attr("action"),s=e.serialize();return $.post(o,s,function(r,o,s){r.status?location.href=r.url:(e.find(".alert-danger span").html(r.info),e.find(".alert-danger").show(),e.find("input[name='password']").val(""))}),!1}}),$(".login-form input").keypress(function(r){if(13==r.which)return $(".login-form").validate().form()&&$(".login-form").submit(),!1})},e=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{email:{required:!0,email:!0}},messages:{email:{required:"请输入邮箱地址."}},invalidHandler:function(r,e){},highlight:function(r){$(r).closest(".form-group").addClass("has-error")},success:function(r){r.closest(".form-group").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){r.insertAfter(e.closest(".input-icon"))},submitHandler:function(r){r.submit()}}),$(".forget-form input").keypress(function(r){if(13==r.which)return $(".forget-form").validate().form()&&$(".forget-form").submit(),!1}),jQuery("#forget-password").click(function(){jQuery(".login-form").hide(),jQuery(".forget-form").show()}),jQuery("#back-btn").click(function(){jQuery(".login-form").show(),jQuery(".forget-form").hide()})},o=function(){function r(r){return r.id?"<img class='flag' src='../../assets/global/img/flags/"+r.id.toLowerCase()+".png'/>&nbsp;&nbsp;"+r.text:r.text}jQuery().select2&&($("#select2_sample4").select2({placeholder:'<i class="fa fa-map-marker"></i>&nbsp;Select a Country',allowClear:!0,formatResult:r,formatSelection:r,escapeMarkup:function(r){return r}}),$("#select2_sample4").change(function(){$(".register-form").validate().element($(this))})),$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{email:{required:!0,email:!0},username:{required:!0},password:{required:!0},rpassword:{equalTo:"#register_password"},tnc:{required:!0}},messages:{tnc:{required:"你必须同意《注册协议》."}},invalidHandler:function(r,e){},highlight:function(r){$(r).closest(".form-group").addClass("has-error")},success:function(r){r.closest(".form-group").removeClass("has-error"),r.remove()},errorPlacement:function(r,e){"tnc"==e.attr("name")?r.insertAfter($("#register_tnc_error")):1===e.closest(".input-icon").size()?r.insertAfter(e.closest(".input-icon")):r.insertAfter(e)},submitHandler:function(r){r.submit()}}),$(".register-form input").keypress(function(r){if(13==r.which)return $(".register-form").validate().form()&&$(".register-form").submit(),!1}),jQuery("#register-btn").click(function(){jQuery(".login-form").hide(),jQuery(".register-form").show()}),jQuery("#register-back-btn").click(function(){jQuery(".login-form").show(),jQuery(".register-form").hide()})};return{init:function(){r(),e(),o()}}}();