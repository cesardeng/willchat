var Login=function(){var e=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{username:{required:!0},password:{required:!0},remember:{required:!1}},messages:{username:{required:"用户名必须填写."},password:{required:"密码必须填写."}},invalidHandler:function(e,r){$(".alert-danger",$(".login-form")).show()},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){function r(e){e.status?location.href=e.url:($("span#tips").html(e.info),$(".alert-danger",$(".login-form")).show())}var o={target:"#tips",success:r,type:"post",dataType:"json",timeout:3e3};$(e).ajaxSubmit(o)}}),$(".login-form input").keypress(function(e){if(13==e.which)return $(".login-form").validate().form()&&$(".login-form").submit(),!1})},r=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{email:{required:!0,email:!0}},messages:{email:{required:"请填写直爽的邮件地址."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){e.submit()}}),$(".forget-form input").keypress(function(e){if(13==e.which)return $(".forget-form").validate().form()&&$(".forget-form").submit(),!1}),jQuery("#forget-password").click(function(){jQuery(".login-form").hide(),jQuery(".forget-form").show(),jQuery("input[name='email']").focus()}),jQuery("#back-btn").click(function(){jQuery(".login-form").show(),jQuery(".forget-form").hide(),jQuery("input[name='username']").focus()})},o=function(){function e(e){return e.id?"<img class='flag' src='../../assets/global/img/flags/"+e.id.toLowerCase()+".png'/>&nbsp;&nbsp;"+e.text:e.text}$("#select2_sample4").select2({placeholder:'<i class="fa fa-map-marker"></i>&nbsp;Select a Country',allowClear:!0,formatResult:e,formatSelection:e,escapeMarkup:function(e){return e}}),$("#select2_sample4").change(function(){$(".register-form").validate().element($(this))}),$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{fullname:{required:!0},email:{required:!0,email:!0},address:{required:!0},city:{required:!0},country:{required:!0},username:{required:!0},password:{required:!0},rpassword:{equalTo:"#register_password"},tnc:{required:!0}},messages:{tnc:{required:"您必须同意用户协议."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){"tnc"==r.attr("name")?e.insertAfter($("#register_tnc_error")):1===r.closest(".input-icon").size()?e.insertAfter(r.closest(".input-icon")):e.insertAfter(r)},submitHandler:function(e){e.submit()}}),$(".register-form input").keypress(function(e){if(13==e.which)return $(".register-form").validate().form()&&$(".register-form").submit(),!1}),jQuery("#register-btn").click(function(){jQuery(".login-form").hide(),jQuery(".register-form").show(),jQuery("input[name='username-reg']").focus()}),jQuery("#register-back-btn").click(function(){jQuery(".login-form").show(),jQuery(".register-form").hide(),jQuery("input[name='username']").focus()})};return{init:function(){e(),r(),o()},showLogin:function(){jQuery(".login-form").show(),jQuery(".forget-form").hide(),jQuery(".register-form").hide(),jQuery("input[name='username']").focus()},showForget:function(){jQuery(".login-form").hide(),jQuery(".forget-form").show(),jQuery(".register-form").hide(),jQuery("input[name='email']").focus()},showRegister:function(){jQuery(".login-form").hide(),jQuery(".forget-form").hide(),jQuery(".register-form").show(),jQuery("input[name='username-reg']").focus()}}}();